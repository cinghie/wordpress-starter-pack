function wppfm_fillFeedList(){var a="";wppfm_getFeedList(function(b){if("0"!==b){a=wppfm_feedListTable(JSON.parse(b))}else{a=wppfm_emptyListTable()}jQuery("#wppfm-feed-list").empty();jQuery("#wppfm-feed-list").append(a)})}function appendCategoryLists(b,c,a){if(a){wppfm_getCategoryListsFromString(b,"",c,function(d){var e=JSON.parse(d)[0];if(e&&e.length>0){jQuery("#lvl_0").html(wppfm_categorySelectCntrl(e));jQuery("#lvl_0").prop("disabled",false)}else{jQuery("#category-selector-lvl").html(wppfm_freeCategoryInputCntrl("default","0",false));jQuery("#category-selector-lvl").prop("disabled",false)}})}}function wppfm_resetFeedList(){wppfm_fillFeedList()}function wppfm_resetFeedStatus(a){wppfm_checkNextFeedInQueue(function(b){wppfm_updateFeedRowStatus(a.product_feed_id,parseInt(a.status_id));wppfm_updateFeedRowData(a)})}function wppfm_feedListTable(g){var h="";for(var e=0;e<g.length;e++){var c=g[e]["status"];var b=g[e]["product_feed_id"];var f=g[e]["url"];var a="on_hold"===c||"ok"===c?true:false;var j="";var d=wppfm_list_status_text(c);if(a){j=g[e]["products"]}else{if("processing"===c){j=wppfm_feed_list_form_vars.processing_the_feed}else{if("failed_processing"===c||"in_processing_queue"===c){j=wppfm_feed_list_form_vars.unknown}}}h+='<tr id="feed-row"';if(e%2===0){h+=' class="alternate"'}h+=">";h+='<td id="title">'+g[e]["title"]+"</td>";h+='<td id="url">'+f+"</td>";h+='<td id="updated-'+b+'">'+g[e]["updated"]+"</td>";h+='<td id="products-'+b+'">'+j+"</td>";h+='<td id="feed-status-'+b+'" value="'+c+'" style="color: '+g[e]["color"]+'"><strong>';h+=d;h+="</strong></td>";h+='<td id="actions-'+b+'">';if(a){h+=feedReadyActions(b,f,c,g[e]["title"])}else{h+=feedNotReadyActions(b,f,g[e]["title"])}h+="</td>"}return h}function feedReadyActions(c,h,a,f){var e="No feed generated"===h?false:true;var g=h.lastIndexOf("/")>0?h.slice(h.lastIndexOf("/")-h.length+1):f;var b="ok"===a?wppfm_feed_list_form_vars.list_deactivate:wppfm_feed_list_form_vars.list_activate;var d='<strong><a href="javascript:void(0);" onclick="parent.location=\'admin.php?page=wp-product-feed-manager-add-new-feed&id='+c+"'\">"+wppfm_feed_list_form_vars.list_edit+" </a>";d+=e?'| <a href="javascript:void(0);" onclick="wppfm_viewFeed(\''+h+"')\">"+wppfm_feed_list_form_vars.list_view+" </a>":"";d+='| <a href="javascript:void(0);" onclick="wppfm_deleteSpecificFeed('+c+", '"+g+"')\">"+wppfm_feed_list_form_vars.list_delete+" </a>";d+=e?'| <a href="javascript:void(0);" onclick="wppfm_deactivateFeed('+c+')" id="feed-status-switch-'+c+'">'+b+" </a>":"";d+='| <a href="javascript:void(0);" onclick="wppfm_duplicateFeed('+c+", '"+f+"')\">"+wppfm_feed_list_form_vars.list_duplicate+"</a></strong>";return d}function feedNotReadyActions(a,e,c){var d=e.lastIndexOf("/")>0?e.slice(e.lastIndexOf("/")-e.length+1):c;var b="<strong>";b+='<a href="javascript:void(0);" onclick="parent.location=\'admin.php?page=wp-product-feed-manager-add-new-feed&id='+a+"'\">"+wppfm_feed_list_form_vars.list_edit+" </a>";b+='| <a href="javascript:void(0);" onclick="wppfm_deleteSpecificFeed('+a+", '"+d+"')\"> "+wppfm_feed_list_form_vars.list_delete+"</a>";b+="</strong>";b+=wppfm_addFeedStatusChecker(a);return b}function wppfm_emptyListTable(){var a="";a+="<tr>";a+="<td colspan = 4>"+wppfm_feed_list_form_vars.no_data_found+"</td>";a+="</tr>";return a}function wppfm_updateFeedRowData(c){if(c.status_id==="1"||c.status_id==="2"){var b=c.product_feed_id;var a=c.status_id==="1"?wppfm_feed_list_form_vars.ok:wppfm_feed_list_form_vars.other;jQuery("#updated-"+b).html(c.updated);jQuery("#products-"+b).html(c.products);jQuery("#actions-"+b).html(feedReadyActions(b,c.url,a,c.title))}}function wppfm_list_status_text(a){switch(a){case"unknown":return wppfm_feed_list_form_vars.unknown;break;case"ok":return wppfm_feed_list_form_vars.status_ok;break;case"on_hold":return wppfm_feed_list_form_vars.on_hold;break;case"processing":return wppfm_feed_list_form_vars.processing;break;case"in_processing_queue":return wppfm_feed_list_form_vars.processing_queue;break;case"has_errors":return wppfm_feed_list_form_vars.has_errors;break;case"failed_processing":return wppfm_feed_list_form_vars.failed_processing;break}}function wppfm_updateFeedRowStatus(b,a){switch(a){case 0:jQuery("#feed-status-"+b).html("<strong>"+wppfm_feed_list_form_vars.unknown+"</strong>");jQuery("#feed-status-"+b).css("color","#6549F7");jQuery("#feed-status-switch-"+b).html("");break;case 1:jQuery("#feed-status-"+b).html("<strong>"+wppfm_feed_list_form_vars.ok+"</strong>");jQuery("#feed-status-"+b).css("color","#0073AA");jQuery("#feed-status-switch-"+b).html(wppfm_feed_list_form_vars.list_deactivate+" ");break;case 2:jQuery("#feed-status-"+b).html("<strong>"+wppfm_feed_list_form_vars.on_hold+"</strong>");jQuery("#feed-status-"+b).css("color","#0173AA");jQuery("#feed-status-switch-"+b).html(wppfm_feed_list_form_vars.list_activate+" ");break;case 3:jQuery("#feed-status-"+b).html("<strong>"+wppfm_feed_list_form_vars.processing+"</strong>");jQuery("#feed-status-"+b).css("color","#0000FF");jQuery("#feed-status-switch-"+b).html("");jQuery("#products-"+b).html(wppfm_feed_list_form_vars.processing_the_feed);break;case 4:jQuery("#feed-status-"+b).html("<strong>"+wppfm_feed_list_form_vars.processing_queue+"</strong>");jQuery("#feed-status-"+b).css("color","#00CCFF");jQuery("#feed-status-switch-"+b).html(wppfm_feed_list_form_vars.list_activate+" ");break;case 5:jQuery("#feed-status-"+b).html("<strong>"+wppfm_feed_list_form_vars.has_errors+"</strong>");jQuery("#feed-status-"+b).css("color","#FF0000");jQuery("#products-"+b).html(wppfm_feed_list_form_vars.unknown);jQuery("#feed-status-switch-"+b).html(wppfm_feed_list_form_vars.list_activate+" ");break;case 6:jQuery("#feed-status-"+b).html("<strong>"+wppfm_feed_list_form_vars.processing_failed+"</strong>");jQuery("#feed-status-"+b).css("color","#FF3300");jQuery("#products-"+b).html(wppfm_feed_list_form_vars.unknown);jQuery("#feed-status-switch-"+b).html("");break}}jQuery(document).ready(function(){wppfm_resetFeedList()});