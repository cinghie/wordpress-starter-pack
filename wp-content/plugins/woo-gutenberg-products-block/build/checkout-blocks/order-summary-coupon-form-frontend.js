(window.webpackWcBlocksJsonp=window.webpackWcBlocksJsonp||[]).push([[45],{152:function(e,t,n){"use strict";var o=n(0);n(220),t.a=()=>Object(o.createElement)("span",{className:"wc-block-components-spinner","aria-hidden":"true"})},153:function(e,t,n){"use strict";var o=n(0),c=n(1),a=n(5),r=n.n(a),s=(n(221),n(152));t.a=e=>{let{children:t,className:n,screenReaderLabel:a,showSpinner:l=!1,isLoading:i=!0}=e;return Object(o.createElement)("div",{className:r()(n,{"wc-block-components-loading-mask":i})},i&&l&&Object(o.createElement)(s.a,null),Object(o.createElement)("div",{className:r()({"wc-block-components-loading-mask__children":i}),"aria-hidden":i},t),i&&Object(o.createElement)("span",{className:"screen-reader-text"},a||Object(c.__)("Loading…","woo-gutenberg-products-block")))}},21:function(e,t,n){"use strict";var o=n(0),c=n(5),a=n.n(c);t.a=e=>{let t,{label:n,screenReaderLabel:c,wrapperElement:r,wrapperProps:s={}}=e;const l=null!=n,i=null!=c;return!l&&i?(t=r||"span",s={...s,className:a()(s.className,"screen-reader-text")},Object(o.createElement)(t,s,c)):(t=r||o.Fragment,l&&i&&n!==c?Object(o.createElement)(t,s,Object(o.createElement)("span",{"aria-hidden":"true"},n),Object(o.createElement)("span",{className:"screen-reader-text"},c)):Object(o.createElement)(t,s,n))}},220:function(e,t){},221:function(e,t){},289:function(e,t,n){"use strict";var o=n(15),c=n.n(o),a=n(0),r=n(49),s=n(5),l=n.n(s),i=n(152);n(290),t.a=e=>{let{className:t,showSpinner:n=!1,children:o,variant:s="contained",...p}=e;const u=l()("wc-block-components-button",t,s,{"wc-block-components-button--loading":n});return Object(a.createElement)(r.a,c()({className:u},p),n&&Object(a.createElement)(i.a,null),Object(a.createElement)("span",{className:"wc-block-components-button__text"},o))}},290:function(e,t){},303:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(1),c=n(7),a=n(4),r=n(23),s=n(41);const l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{cartCoupons:t,cartIsLoading:n}=Object(s.a)(),{createErrorNotice:l}=Object(c.useDispatch)("core/notices"),{createNotice:i}=Object(c.useDispatch)("core/notices"),{setValidationErrors:p}=Object(c.useDispatch)(a.VALIDATION_STORE_KEY),{isApplyingCoupon:u,isRemovingCoupon:b}=Object(c.useSelect)(e=>{const t=e(a.CART_STORE_KEY);return{isApplyingCoupon:t.isApplyingCoupon(),isRemovingCoupon:t.isRemovingCoupon()}},[l,i]),{applyCoupon:d,removeCoupon:m,receiveApplyingCoupon:O}=Object(c.useDispatch)(a.CART_STORE_KEY),g=t=>{d(t).then(n=>{!0===n&&i("info",Object(o.sprintf)(
/* translators: %s coupon code. */
Object(o.__)('Coupon code "%s" has been applied to your cart.',"woo-gutenberg-products-block"),t),{id:"coupon-form",type:"snackbar",context:e})}).catch(e=>{p({coupon:{message:Object(r.decodeEntities)(e.message),hidden:!1}}),O("")})},j=t=>{m(t).then(n=>{!0===n&&i("info",Object(o.sprintf)(
/* translators: %s coupon code. */
Object(o.__)('Coupon code "%s" has been removed from your cart.',"woo-gutenberg-products-block"),t),{id:"coupon-form",type:"snackbar",context:e})}).catch(t=>{l(t.message,{id:"coupon-form",context:e}),O("")})};return{appliedCoupons:t,isLoading:n,applyCoupon:g,removeCoupon:j,isApplyingCoupon:u,isRemovingCoupon:b}}},353:function(e,t){},415:function(e,t,n){"use strict";var o=n(0),c=n(1),a=n(289),r=n(21),s=n(153),l=n(10),i=n(11),p=n(7),u=n(4);n(353),t.a=Object(l.withInstanceId)(e=>{let{instanceId:t,isLoading:n=!1,initialOpen:l=!1,onSubmit:b=(()=>{})}=e;const[d,m]=Object(o.useState)(""),O=Object(o.useRef)(!1),g="wc-block-components-totals-coupon__input-"+t,{validationError:j,validationErrorId:E}=Object(p.useSelect)(e=>{const t=e(u.VALIDATION_STORE_KEY);return{validationError:t.getValidationError("coupon"),validationErrorId:t.getValidationErrorId(g)}});return Object(o.useEffect)(()=>{O.current!==n&&(n||!d||j||m(""),O.current=n)},[n,d,j]),Object(o.createElement)(i.Panel,{className:"wc-block-components-totals-coupon",hasBorder:!1,initialOpen:l,title:Object(o.createElement)(r.a,{label:Object(c.__)("Coupon code","woo-gutenberg-products-block"),screenReaderLabel:Object(c.__)("Apply a coupon code","woo-gutenberg-products-block"),htmlFor:g})},Object(o.createElement)(s.a,{screenReaderLabel:Object(c.__)("Applying coupon…","woo-gutenberg-products-block"),isLoading:n,showSpinner:!1},Object(o.createElement)("div",{className:"wc-block-components-totals-coupon__content"},Object(o.createElement)("form",{className:"wc-block-components-totals-coupon__form"},Object(o.createElement)(i.ValidatedTextInput,{id:g,errorId:"coupon",className:"wc-block-components-totals-coupon__input",label:Object(c.__)("Enter code","woo-gutenberg-products-block"),value:d,ariaDescribedBy:E,onChange:e=>{m(e)},focusOnMount:!0,showError:!1}),Object(o.createElement)(a.a,{className:"wc-block-components-totals-coupon__button",disabled:n||!d,showSpinner:n,onClick:e=>{e.preventDefault(),b(d)},type:"submit"},Object(c.__)("Apply","woo-gutenberg-products-block"))),Object(o.createElement)(i.ValidationInputError,{propertyName:"coupon",elementId:g}))))})},492:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(415),a=n(303),r=n(2),s=n(11);t.default=e=>{let{className:t=""}=e;const n=Object(r.getSetting)("couponsEnabled",!0),{applyCoupon:l,isApplyingCoupon:i}=Object(a.a)("wc/checkout");return n?Object(o.createElement)(s.TotalsWrapper,{className:t},Object(o.createElement)(c.a,{onSubmit:l,isLoading:i})):null}}}]);