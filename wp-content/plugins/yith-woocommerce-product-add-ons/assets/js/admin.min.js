!function(e){function t(t,i){return i.children().each(function(){e(this).width(e(this).width())}),i}e("#option-price-type").on("change",function(){let t=e(this),i=t.parents(".option-cost").find("div.option-price-sale");"multiplied"===t.val()?i.fadeOut():i.fadeIn()}),e("#sortable-blocks").on("change",".active .yith-plugin-fw-onoff-container input",function(){var t={action:"enable_disable_block",block_id:e(this).attr("id").replace("yith-wapo-active-block-",""),block_vis:e(this).is(":checked")?1:0};e.post(ajaxurl,t,function(e){console.log("[YITH.LOG] - Block visibility updated")})}),e("#sortable-addons").on("change",".addon-onoff input",function(){var t={action:"enable_disable_addon",addon_id:e(this).attr("id").replace("yith-wapo-active-addon-",""),addon_vis:e(this).is(":checked")?1:0};e.post(ajaxurl,t,function(e){console.log("[YITH.LOG] - Addon visibility updated")})}),e("#sortable-blocks").sortable({helper:t,revert:!0,axis:"y",update:function(t,i){var a={action:"sortable_blocks",moved_item:i.item.data("id"),prev_item:parseFloat(i.item.prev().data("priority")),next_item:parseFloat(i.item.next().data("priority"))};e.post(ajaxurl,a,function(t){var i=t.split("-"),a=i[0],o=parseFloat(i[1]);e("#sortable-blocks #block-"+a).attr("data-priority",o)})}}),e("#sortable-addons").sortable({revert:!0,axis:"y",update:function(t,i){var a={action:"sortable_addons",moved_item:i.item.data("id"),prev_item:parseFloat(i.item.prev().data("priority")),next_item:parseFloat(i.item.next().data("priority"))};e.post(ajaxurl,a,function(t){var i=t.split("-"),a=i[0],o=parseFloat(i[1]);e("#sortable-addons #addon-"+a).attr("data-priority",o),console.log("[YITH.LOG] - New priority value: "+o)})}}),e("#addon_options").sortable({helper:t,revert:!0,axis:"y"}),e("ul, li, tbody, tr, td").disableSelection();var i=e("#block-rules #yith-wapo-block-rule-show-in input"),a=e(".field-wrap.yith-wapo-block-rule-show-in-products"),o=e(".field-wrap.yith-wapo-block-rule-show-in-categories"),n=i.val(),d=(e(".field-wrap.yith-wapo-block-rule-exclude-products"),e("#block-rules #yith-wapo-block-rule-exclude-products")),l=e(".field-wrap.yith-wapo-block-rule-exclude-products-products"),s=e(".field-wrap.yith-wapo-block-rule-exclude-products-categories");function r(t){t.is(":checked")?e(".enabled-by-"+t.attr("id")).fadeIn():e(".enabled-by-"+t.attr("id")).fadeOut()}i.change(function(){n=e(this).val(),"products"==e(this).val()?(a.fadeIn(),o.hide()):"categories"==e(this).val()?(a.hide(),o.fadeIn()):(a.fadeOut(),o.fadeOut())}),d.change(function(){"yes"==e(this).val()?(l.fadeIn(),"all"==n&&s.fadeIn()):(l.fadeOut(),s.fadeOut())}),e(".yith-wapo").on("change",".enabler input",function(){r(e(this))}),e(".yith-wapo .enabler input").each(function(){r(e(this))}),e(".yith-wapo").on("change","#option-separator-style",function(){"empty_space"==e(this).val()?e(".field-wrap.option-separator-color").fadeOut():e(".field-wrap.option-separator-color").fadeIn()}),e(".yith-wapo").on("change","#addon-custom-style",function(){!e(this).is(":checked")&&e("#addon-image-equal-height").is(":checked")&&e(".addon-image-equal-height .yith-plugin-fw-onoff").click()}),e("#tab-options-list").on("click",".option .title",function(){var t=e(this).parent().find(".fields");t.toggle(),t.is(":visible")?e(this).parent().removeClass("close").addClass("open"):e(this).parent().removeClass("open").addClass("close")}),e("#add-new-option").click(function(){var t=e(this).parent().find(".option").length;e(".yith-plugin-fw-upload-container button").off();var i=wp.template("new-option-"+t);e("#add-new-option").before(i()),e("body").trigger("yith_fields_init")}),e("#tab-options-list").on("change",".option-price-method",function(){var t=e(this).parent().parent().parent().parent();"free"!=e(this).val()&&"product"!=e(this).val()&&"value_x_product"!=e(this).val()?(t.find(".option-cost").fadeIn(),"increase"==e(this).val()?(t.find(".option-cost .option-price-method-increase").fadeIn(),t.find(".option-cost .option-price-method-decrease").fadeOut()):(t.find(".option-cost .option-price-method-increase").fadeOut(),t.find(".option-cost .option-price-method-decrease").fadeIn())):t.find(".option-cost").fadeOut()}),e("#tab-options-list").on("change",".option-selectable-dates",function(){var t=e(this).parent().parent().parent().parent();"days"==e(this).val()?(t.find(".option-selectable-days-ranges").fadeIn(),t.find(".option-selectable-date-ranges").hide()):"date"==e(this).val()?(t.find(".option-selectable-days-ranges").hide(),t.find(".option-selectable-date-ranges").fadeIn()):(t.find(".option-selectable-days-ranges").hide(),t.find(".option-selectable-date-ranges").hide())}),e("#tab-options-list").on("click",".yith-plugin-fw__action-button--delete-action",function(){e(this).parent().parent().remove()}),e("#tab-options-list").on("change",".color-show-as select",function(){var t=e(this).parent().parent().parent().parent().parent();"double"==e(this).val()?(t.find(".color").fadeIn(),t.find(".color_b").fadeIn(),t.find(".color_image").hide()):"image"==e(this).val()?(t.find(".color").hide(),t.find(".color_b").hide(),t.find(".color_image").fadeIn()):(t.find(".color").fadeIn(),t.find(".color_b").hide(),t.find(".color_image").hide())}),e("#tab-options-list").on("click",".option .title",function(){e(this).parent().find(".color-show-as select").change()}),e("#tab-options-list").find(".color-show-as select").change(),e(".yith-wapo").on("change",".option-date-default",function(){var t=e(this).parent().parent().parent().parent();"specific"==e(this).val()?(t.find(".option-date-default-day").fadeIn(),t.find(".option-date-default-interval").hide()):"interval"==e(this).val()?(t.find(".option-date-default-day").hide(),t.find(".option-date-default-interval").fadeIn()):(t.find(".option-date-default-day").fadeOut(),t.find(".option-date-default-interval").fadeOut())}),e(document).on("click",".add-date-rule a",function(){let t=e(this).parent(),i=e(this).parent().parent().find(".rule:first-child").clone(),a=Math.floor(1e5*Math.random());return i.find("select").val("days").attr("id","new-select-"+a),i.find(".option-date-default-day").fadeIn(),i.find("input").val("").attr("id","new-input-"+a),i.find("ul li.select2-selection__choice").remove(),i.find(".delete-rule").show(),t.before(i),e("#new-input-"+a).datepicker(),!1}),e(".date-rules").on("change",".select_what",function(){var t=e(this).parent().parent().parent();t.find(".field:not(.what)").hide(),"years"==e(this).val()?t.find(".field.years").fadeIn():"months"==e(this).val()?t.find(".field.months").fadeIn():"daysweek"==e(this).val()?t.find(".field.daysweek").fadeIn():t.find(".field.days").fadeIn()}),e(".date-rules").on("click",".delete-rule",function(){e(this).parent().remove()}),e(document).on("click",".add-time-slot a",function(){let t=e(this).parent(),i=e(this).parent().parent().find(".slot:first-child").clone();Math.floor(1e5*Math.random());return i.find(".delete-slot").show(),t.before(i),!1}),e(".time-slots").on("click",".delete-slot",function(){e(this).parent().remove()}),e(document).on("select2:open",function(t){e(".select2-results").closest(".select2-container").addClass("yith-addons-select2-container")})}(jQuery);
